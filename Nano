#!/bin/bash
set -e

echo "Updating system..."
sudo apt update
sudo apt install -y build-essential git cmake python3 python3-pip libopenblas-dev

echo "Cloning llama.cpp..."
if [ ! -d "llama.cpp" ]; then
    git clone https://github.com/ggerganov/llama.cpp
fi

cd llama.cpp

echo "Building with CUDA support for Jetson Nano..."
make clean

make LLAMA_CUBLAS=1 \
     CUDA_DOCKER_ARCH=53 \
     -j$(nproc)

echo "Install complete!"
echo "Binary is located at: llama.cpp/main"
